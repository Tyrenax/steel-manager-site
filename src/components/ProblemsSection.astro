---
const problems = [
  {
    problem: "Mon ERP ne colle pas à mon métier",
    solution: "Nous développons les modules qui vous manquent, connectés à votre système existant.",
    detail: "Compatible SAP, Odoo, Sage, ou votre ERP maison",
    icon: "puzzle"
  },
  {
    problem: "Mes équipes terrain travaillent encore sur papier",
    solution: "Apps mobiles sur mesure : pointage, contrôle, inventaire. Même hors connexion.",
    detail: "Déployé auprès de +200 utilisateurs terrain",
    icon: "clipboard"
  },
  {
    problem: "Je n'ai pas de visibilité sur ma production",
    solution: "Tableaux de bord temps réel, KPIs automatisés, alertes intelligentes.",
    detail: "Données consolidées en un seul endroit",
    icon: "chart"
  },
  {
    problem: "Mes systèmes ne se parlent pas",
    solution: "Intégration de tous vos outils : ERP, machines, capteurs IoT, APIs tierces.",
    detail: "Zéro double saisie, flux automatisés",
    icon: "link"
  }
];

const icons: Record<string, string> = {
  puzzle: `<path stroke-linecap="round" stroke-linejoin="round" d="M14.25 6.087c0-.355.186-.676.401-.959.221-.29.349-.634.349-1.003 0-1.036-1.007-1.875-2.25-1.875s-2.25.84-2.25 1.875c0 .369.128.713.349 1.003.215.283.401.604.401.959v0a.64.64 0 01-.657.643 48.39 48.39 0 01-4.163-.3c.186 1.613.293 3.25.315 4.907a.656.656 0 01-.658.663v0c-.355 0-.676-.186-.959-.401a1.647 1.647 0 00-1.003-.349c-1.036 0-1.875 1.007-1.875 2.25s.84 2.25 1.875 2.25c.369 0 .713-.128 1.003-.349.283-.215.604-.401.959-.401v0c.31 0 .555.26.532.57a48.039 48.039 0 01-.642 5.056c1.518.19 3.058.309 4.616.354a.64.64 0 00.657-.643v0c0-.355-.186-.676-.401-.959a1.647 1.647 0 01-.349-1.003c0-1.035 1.008-1.875 2.25-1.875 1.243 0 2.25.84 2.25 1.875 0 .369-.128.713-.349 1.003-.215.283-.4.604-.4.959v0c0 .333.277.599.61.58a48.1 48.1 0 005.427-.63 48.05 48.05 0 00.582-4.717.532.532 0 00-.533-.57v0c-.355 0-.676.186-.959.401-.29.221-.634.349-1.003.349-1.035 0-1.875-1.007-1.875-2.25s.84-2.25 1.875-2.25c.37 0 .713.128 1.003.349.283.215.604.401.959.401v0a.656.656 0 00.659-.663 47.703 47.703 0 00-.31-4.82 47.63 47.63 0 00-5.067-.592.563.563 0 00-.594.56v0z" />`,
  clipboard: `<path stroke-linecap="round" stroke-linejoin="round" d="M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25zM6.75 12h.008v.008H6.75V12zm0 3h.008v.008H6.75V15zm0 3h.008v.008H6.75V18z" />`,
  chart: `<path stroke-linecap="round" stroke-linejoin="round" d="M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z" />`,
  link: `<path stroke-linecap="round" stroke-linejoin="round" d="M7.5 21L3 16.5m0 0L7.5 12M3 16.5h13.5m0-13.5L21 7.5m0 0L16.5 12M21 7.5H7.5" />`
};
---

<section id="solutions" class="section-dark section-spacing section-anchor-line relative overflow-hidden">
  <!-- Background decorations -->
  <div class="hidden md:block absolute top-0 right-0 w-96 h-96 bg-primary/10 rounded-full blur-3xl"></div>
  <div class="hidden md:block absolute bottom-0 left-0 w-80 h-80 bg-accent/8 rounded-full blur-3xl"></div>

  <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
    <!-- Header -->
    <div class="text-center max-w-2xl mx-auto mb-10 sm:mb-12" data-aos="fade-up">
      <span class="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-md bg-accent/10 text-accent border border-accent/20 mb-4">
        <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3" />
        </svg>
        Solutions
      </span>
      <h2 class="text-3xl sm:text-4xl font-bold text-white mb-4">
        Ce que nous résolvons
      </h2>
      <p class="text-white/60 text-lg">
        Des problèmes terrain que nous connaissons bien. Des solutions éprouvées que nous adaptons à votre contexte.
      </p>
    </div>

    <!-- Problems/Solutions Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-3.5 sm:gap-4 lg:gap-6">
      {problems.map((item, index) => (
        <article
          class="problem-card group rounded-xl p-5 sm:p-6 lg:p-7"
          data-aos="fade-up"
          data-aos-delay={index * 50}
        >
          <div class="flex items-start justify-between gap-4 mb-4">
            <p class="problem-title text-white font-semibold text-xl sm:text-[1.6rem] leading-snug">
              "{item.problem}"
            </p>
            <div class="problem-icon w-10 h-10 rounded-lg flex items-center justify-center shrink-0" style="background: rgba(6,214,160,0.1);">
              <svg class="w-5 h-5 text-accent" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                <Fragment set:html={icons[item.icon]} />
              </svg>
            </div>
          </div>

          <div class="mb-3">
            <svg class="problem-arrow-connected text-accent" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 14" aria-hidden="true">
              <path stroke-linecap="round" d="M1 7H19" />
              <path stroke-linecap="round" stroke-linejoin="round" d="M15 3L19 7L15 11" />
            </svg>
          </div>

          <!-- Solution -->
          <p class="text-white/65 text-sm leading-relaxed mb-3">
            {item.solution}
          </p>

          <!-- Detail/Proof -->
          <p class="text-xs text-accent font-medium">
            {item.detail}
          </p>
        </article>
      ))}
    </div>

    <!-- Bottom note -->
    <div class="text-center mt-10" data-aos="fade-up">
      <p class="text-white/40 text-sm">
        Votre problème n'est pas dans la liste ?
        <a href="#contact" class="text-accent font-medium hover:text-accent/80 transition-colors ml-1">
          Parlons-en &rarr;
        </a>
      </p>
    </div>
  </div>
</section>

<style>
  .problem-card {
    background: rgba(255, 255, 255, 0.04);
    border: 1px solid rgba(255, 255, 255, 0.08);
    min-height: 100%;
    transition:
      transform 240ms cubic-bezier(0.16, 1, 0.3, 1),
      box-shadow 240ms cubic-bezier(0.16, 1, 0.3, 1),
      border-color 200ms ease,
      background-color 200ms ease;
  }

  .problem-card:hover {
    transform: translateY(-3px);
    border-color: rgba(67, 97, 238, 0.34);
    background: rgba(255, 255, 255, 0.06);
    box-shadow: 0 18px 28px -22px rgba(6, 12, 30, 0.9);
  }

  .problem-icon {
    transition: transform 220ms ease, background-color 220ms ease;
  }

  .problem-card:hover .problem-icon {
    transform: translateY(-1px) scale(1.04);
    background: rgba(6, 214, 160, 0.16);
  }

  .problem-arrow-connected {
    width: 2rem;
    height: 0.9rem;
    opacity: 0.88;
    transition: width 220ms ease, opacity 220ms ease, transform 220ms ease;
  }

  .problem-card:hover .problem-arrow-connected {
    width: 2.45rem;
    transform: translateX(1px);
    opacity: 1;
  }

  @media (prefers-reduced-motion: reduce) {
    .problem-card,
    .problem-icon,
    .problem-arrow-connected {
      transition: none;
    }
  }

  @media (max-width: 767px) {
    .problem-title {
      font-size: 1.22rem;
      line-height: 1.28;
    }
  }
</style>
